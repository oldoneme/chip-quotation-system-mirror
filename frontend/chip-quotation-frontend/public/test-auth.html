<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¤è¯æµ‹è¯•</title>
</head>
<body>
    <h1>ä¼ä¸šå¾®ä¿¡è®¤è¯æµ‹è¯•</h1>
    <p id="status">æ­£åœ¨æ£€æŸ¥è®¤è¯çŠ¶æ€...</p>
    
    <script>
        console.log('ğŸ”¥ è®¤è¯æµ‹è¯•é¡µé¢å·²åŠ è½½');
        
        // æ£€æŸ¥è®¤è¯çŠ¶æ€
        fetch('/api/me', { 
            credentials: 'include' 
        })
        .then(response => {
            console.log('è®¤è¯æ£€æŸ¥å“åº”:', response.status);
            if (response.status === 401) {
                document.getElementById('status').innerHTML = 'æœªè®¤è¯ï¼Œ3ç§’åè·³è½¬åˆ°ç™»å½•é¡µé¢...';
                setTimeout(() => {
                    console.log('è·³è½¬åˆ°ä¼ä¸šå¾®ä¿¡ç™»å½•');
                    window.location.href = '/auth/login';
                }, 3000);
            } else {
                return response.json();
            }
        })
        .then(data => {
            if (data) {
                document.getElementById('status').innerHTML = 'å·²è®¤è¯ï¼š' + JSON.stringify(data);
            }
        })
        .catch(error => {
            console.error('è®¤è¯æ£€æŸ¥å¤±è´¥:', error);
            document.getElementById('status').innerHTML = 'è®¤è¯æ£€æŸ¥å¤±è´¥ï¼š' + error.message;
        });
    </script>
</body>
</html>
# ä¼ä¸šå¾®ä¿¡å®¡æ‰¹é›†æˆ - è¯¦ç»†å®æ–½è®¡åˆ’

**é¡¹ç›®åç§°**: WeCom åŸç”Ÿå®¡æ‰¹ + è§„åˆ™æ²»ç†å±‚ + ç”Ÿæ•ˆæŠ¥ä»·å•ç”Ÿæˆ  
**åŸºäºæ–¹æ¡ˆ**: æ›´æ–°ç‰ˆè§„èŒƒåŒ–å®æ–½æ–¹æ¡ˆ  
**é¡¹ç›®å‘¨æœŸ**: 2025-09-01 ~ 2025-09-30 (4å‘¨)  
**å½“å‰çŠ¶æ€**: ğŸ“‹ è¯¦ç»†è®¡åˆ’åˆ¶å®šä¸­

---

## ğŸ“‹ æ€»ä½“å®æ–½ç­–ç•¥

æŒ‰ç…§**é˜¶æ®µA â†’ é˜¶æ®µB â†’ é˜¶æ®µC**çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„éªŒæ”¶æ ‡å‡†ã€‚
- **é˜¶æ®µA**: è§„åˆ™å¤–ç½® + æ¨¡å‹ä¸è¿ç§» + å¿«ç…§æœºåˆ¶ (1å‘¨)
- **é˜¶æ®µB**: å®¡æ‰¹æäº¤æµç¨‹ + çŸ­æ•ˆdeeplink + å¹‚ç­‰å›è°ƒ (1.5å‘¨)  
- **é˜¶æ®µC**: å¯¼å‡ºå ä½ + å‰ç«¯æ”¹é€  + æ–‡æ¡£å®Œå–„ (1.5å‘¨)

---

## ğŸ¯ é˜¶æ®µA: è§„åˆ™å¤–ç½® + æ¨¡å‹ä¸è¿ç§» + å¿«ç…§æœºåˆ¶ (1å‘¨)

### A1: é…ç½®ä¸è§„åˆ™å¤–ç½® (1å¤©)

#### A1.1 è¡¥é½ç¯å¢ƒé…ç½® (2å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| è¡¥é½.envé…ç½®é¡¹ | `backend/.env.example` | æ·»åŠ DEEPLINK_JWT_SECRETç­‰æ–°é…ç½®é¡¹ | â³ | 0.5h | - |
| éªŒè¯config.pyé…ç½®è¯»å– | `backend/app/config.py` | ç¡®ä¿æ–°é…ç½®é¡¹å¯æ­£ç¡®è¯»å– | â³ | 0.5h | - |
| æœ¬åœ°ç¯å¢ƒé…ç½®æ£€æŸ¥ | `backend/.env` | å¤åˆ¶.env.exampleå¹¶é…ç½®æµ‹è¯•å€¼ | â³ | 1h | - |

#### A1.2 åˆ›å»ºè§„åˆ™é…ç½®æ–‡ä»¶ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºapproval_rules.yaml | `backend/app/config/approval_rules.yaml` | å®šä¹‰æ¨¡æ¿æ˜ å°„å’Œå®¡æ‰¹è§„åˆ™ | â³ | 1h | - |
| å®ç°rules_loader.py | `backend/app/services/rules_loader.py` | YAMLè¯»å–å’Œç¼“å­˜æœºåˆ¶ | â³ | 2h | - |
| å®ç°expr_eval.py | `backend/app/services/expr_eval.py` | å®‰å…¨è¡¨è¾¾å¼æ±‚å€¼(ç™½åå•) | â³ | 1h | - |

#### A1.3 é…ç½®éªŒè¯æµ‹è¯• (2å°æ—¶)
| ä»»åŠ¡ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|
| è§„åˆ™åŠ è½½æµ‹è¯• | éªŒè¯YAMLå¯æ­£ç¡®åŠ è½½å’Œè§£æ | â³ | 0.5h | - |
| è¡¨è¾¾å¼æ±‚å€¼æµ‹è¯• | æµ‹è¯•amount_total>=500000ç­‰è¡¨è¾¾å¼ | â³ | 0.5h | - |
| æ¨¡æ¿é€‰æ‹©æµ‹è¯• | æµ‹è¯•6ç§æŠ¥ä»·ç±»å‹æ˜ å°„ | â³ | 1h | - |

### A2: æ•°æ®æ¨¡å‹æ‰©å±• (2å¤©)

#### A2.1 æ‰©å±•Quoteæ¨¡å‹ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ£€æŸ¥Quoteå­—æ®µå®Œæ•´æ€§ | `backend/app/models.py` | ç¡®è®¤amount_totalã€approval_statuså­—æ®µ | â³ | 0.5h | - |
| æ·»åŠ ç¼ºå¤±å­—æ®µ | `backend/app/models.py` | æ·»åŠ amount_totalè®¡ç®—å±æ€§ç­‰ | â³ | 1.5h | - |
| æ›´æ–°Quoteå…³ç³»æ˜ å°„ | `backend/app/models.py` | ä¸æ–°æ¨¡å‹çš„å¤–é”®å…³ç³» | â³ | 1h | - |
| Quoteæ¨¡å‹æµ‹è¯• | å•å…ƒæµ‹è¯• | éªŒè¯å­—æ®µå’Œå…³ç³»æ­£ç¡®æ€§ | â³ | 1h | - |

#### A2.2 åˆ›å»ºQuoteSnapshotæ¨¡å‹ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| è®¾è®¡QuoteSnapshotæ¨¡å‹ | `backend/app/models.py` | id, quote_id, data(JSON), hashç­‰å­—æ®µ | â³ | 1h | - |
| å®ç°æ•°æ®åºåˆ—åŒ–æ–¹æ³• | `backend/app/models.py` | to_snapshot()æ–¹æ³• | â³ | 1.5h | - |
| å®ç°hashè®¡ç®—æ–¹æ³• | `backend/app/models.py` | calc_hash()ç¨³å®šå“ˆå¸Œç®—æ³• | â³ | 1h | - |
| QuoteSnapshotæµ‹è¯• | å•å…ƒæµ‹è¯• | éªŒè¯å¿«ç…§å’Œå“ˆå¸ŒåŠŸèƒ½ | â³ | 0.5h | - |

#### A2.3 åˆ›å»ºEffectiveQuoteæ¨¡å‹ (4å°æ—¶)  
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| è®¾è®¡EffectiveQuoteæ¨¡å‹ | `backend/app/models.py` | id, quote_id, snapshot_id, versionç­‰ | â³ | 1h | - |
| å®ç°ç‰ˆæœ¬ç®¡ç†é€»è¾‘ | `backend/app/models.py` | è‡ªåŠ¨ç‰ˆæœ¬é€’å¢æœºåˆ¶ | â³ | 1.5h | - |
| æ·»åŠ å¯¼å‡ºæ–‡ä»¶å­—æ®µ | `backend/app/models.py` | export_file_url, checksumç­‰ | â³ | 1h | - |
| EffectiveQuoteæµ‹è¯• | å•å…ƒæµ‹è¯• | éªŒè¯ç‰ˆæœ¬ç®¡ç†å’Œå­—æ®µå®Œæ•´æ€§ | â³ | 0.5h | - |

#### A2.4 å®Œå–„ApprovalRecordæ¨¡å‹ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ£€æŸ¥ApprovalRecordå­—æ®µ | `backend/app/models.py` | ç¡®è®¤æ‰€éœ€å­—æ®µå®Œæ•´æ€§ | â³ | 0.5h | - |
| æ·»åŠ ä¼ä¸šå¾®ä¿¡é›†æˆå­—æ®µ | `backend/app/models.py` | wecom_instance_id, payloadç­‰ | â³ | 1.5h | - |
| æ·»åŠ å¹‚ç­‰æ€§æ”¯æŒå­—æ®µ | `backend/app/models.py` | event_time, processedç­‰ | â³ | 1h | - |
| ApprovalRecordæµ‹è¯• | å•å…ƒæµ‹è¯• | éªŒè¯å­—æ®µå’Œçº¦æŸ | â³ | 1h | - |

### A3: æ•°æ®åº“è¿ç§» (1å¤©)

#### A3.1 åˆå§‹åŒ–Alembic (4å°æ—¶)
| ä»»åŠ¡ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|
| æ£€æŸ¥AlembicçŠ¶æ€ | ç¡®è®¤é¡¹ç›®æ˜¯å¦å·²ä½¿ç”¨Alembic | â³ | 0.5h | - |
| åˆå§‹åŒ–Alembicé…ç½® | alembic init alembic (å¦‚éœ€è¦) | â³ | 1h | - |
| é…ç½®alembic.ini | æ•°æ®åº“URLå’Œé…ç½®é¡¹ | â³ | 0.5h | - |
| åˆ›å»ºåŸºç¡€è¿ç§» | åŸºäºç°æœ‰æ¨¡å‹ç”Ÿæˆåˆå§‹è¿ç§» | â³ | 2h | - |

#### A3.2 åˆ›å»ºå¢é‡è¿ç§» (4å°æ—¶)
| ä»»åŠ¡ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|
| ç”Ÿæˆæ–°æ¨¡å‹è¿ç§» | QuoteSnapshot, EffectiveQuoteè¿ç§» | â³ | 1.5h | - |
| ç”Ÿæˆå­—æ®µå˜æ›´è¿ç§» | Quoteå’ŒApprovalRecordå­—æ®µå˜æ›´ | â³ | 1.5h | - |
| éªŒè¯è¿ç§»è„šæœ¬ | æ£€æŸ¥SQLè¯­æ³•å’Œé€»è¾‘æ­£ç¡®æ€§ | â³ | 0.5h | - |
| è¿ç§»å›æ»šæµ‹è¯• | ç¡®ä¿å¯å®‰å…¨å›æ»š | â³ | 0.5h | - |

### A4: å¿«ç…§æœåŠ¡å®ç° (1å¤©)

#### A4.1 å®ç°snapshot_service.py (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºSnapshotServiceç±» | `backend/app/services/snapshot_service.py` | åŸºç¡€æœåŠ¡ç±»ç»“æ„ | â³ | 1h | - |
| å®ç°create_snapshot() | `backend/app/services/snapshot_service.py` | åˆ›å»ºæŠ¥ä»·å¿«ç…§ | â³ | 2h | - |
| å®ç°calc_hash()æ–¹æ³• | `backend/app/services/snapshot_service.py` | ç¨³å®šå“ˆå¸Œè®¡ç®— | â³ | 1h | - |
| å®ç°æ•°æ®åºåˆ—åŒ– | `backend/app/services/snapshot_service.py` | Quoteå¯¹è±¡è½¬JSON | â³ | 1.5h | - |
| å¿«ç…§æœåŠ¡é›†æˆæµ‹è¯• | å•å…ƒæµ‹è¯• | ç«¯åˆ°ç«¯æµ‹è¯•å¿«ç…§åˆ›å»º | â³ | 0.5h | - |

#### A4.2 å¿«ç…§åŠŸèƒ½éªŒè¯ (2å°æ—¶)
| ä»»åŠ¡ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|
| å¿«ç…§åˆ›å»ºæµ‹è¯• | ä»Quoteåˆ›å»ºå¿«ç…§å¹¶éªŒè¯æ•°æ® | â³ | 1h | - |
| å“ˆå¸Œä¸€è‡´æ€§æµ‹è¯• | ç›¸åŒæ•°æ®ç”Ÿæˆç›¸åŒå“ˆå¸Œ | â³ | 0.5h | - |
| æ•°æ®å®Œæ•´æ€§æµ‹è¯• | å¿«ç…§åŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µ | â³ | 0.5h | - |

### é˜¶æ®µAéªŒæ”¶æ ‡å‡†

**å¿…é¡»å…¨éƒ¨é€šè¿‡æ‰èƒ½è¿›å…¥é˜¶æ®µB**:

- [ ] âœ… approval_rules.yamlå¯è¢«æ­£ç¡®åŠ è½½ï¼Œby_amountè·¯ç”±å¯è¢«è§£æ
- [ ] âœ… èƒ½åˆ›å»ºQuoteå¯¹è±¡ï¼Œè°ƒç”¨create_snapshot()ï¼Œç”ŸæˆQuoteSnapshotå¹¶è®¡ç®—æ­£ç¡®hash
- [ ] âœ… Alembicè¿ç§»å¯é¡ºåˆ©æ‰§è¡Œä¸”å›æ»šå®‰å…¨ï¼Œæ•°æ®åº“åŒ…å«æ–°è¡¨å’Œå­—æ®µ
- [ ] âœ… æ‰€æœ‰æ–°å¢æ¨¡å‹çš„å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] âœ… è§„åˆ™åŠ è½½ã€è¡¨è¾¾å¼æ±‚å€¼ã€æ¨¡æ¿é€‰æ‹©åŠŸèƒ½æ­£å¸¸

---

## ğŸ”„ é˜¶æ®µB: å®¡æ‰¹æäº¤æµç¨‹ + çŸ­æ•ˆdeeplink + å¹‚ç­‰å›è°ƒ (1.5å‘¨)

### B1: å®¡æ‰¹æœåŠ¡å±‚å®ç° (2å¤©)

#### B1.1 å®ç°WeComApprovalService (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºWeComApprovalService | `backend/app/services/wecom_approval_service.py` | åŸºç¡€æœåŠ¡ç±» | â³ | 0.5h | - |
| å®ç°select_template() | `backend/app/services/wecom_approval_service.py` | æ ¹æ®æŠ¥ä»·ç±»å‹é€‰æ‹©æ¨¡æ¿ | â³ | 1h | - |
| å®ç°select_approvers() | `backend/app/services/wecom_approval_service.py` | æ ¹æ®è§„åˆ™é€‰æ‹©å®¡æ‰¹äºº | â³ | 1.5h | - |
| å®ç°build_message_payload() | `backend/app/services/wecom_approval_service.py` | æ„å»ºå®¡æ‰¹æ¶ˆæ¯å†…å®¹ | â³ | 1.5h | - |
| é›†æˆrules_loader | `backend/app/services/wecom_approval_service.py` | ä½¿ç”¨è§„åˆ™é…ç½® | â³ | 1h | - |
| å®¡æ‰¹æœåŠ¡å•å…ƒæµ‹è¯• | æµ‹è¯•æ–‡ä»¶ | æ¨¡æ¿é€‰æ‹©å’Œå®¡æ‰¹äººé€‰æ‹©æµ‹è¯• | â³ | 0.5h | - |

#### B1.2 æ‰©å±•WeComIntegration (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ‰©å±•create_approval_instance() | `backend/app/services/wecom_integration.py` | å¢å¼ºå®¡æ‰¹åˆ›å»ºåŠŸèƒ½ | â³ | 2h | - |
| å®ç°parse_callback() | `backend/app/services/wecom_integration.py` | è§£æå›è°ƒæ•°æ® | â³ | 1.5h | - |
| å®ç°send_notify() | `backend/app/services/wecom_integration.py` | å‘é€é€šçŸ¥æ¶ˆæ¯ | â³ | 1.5h | - |
| æ·»åŠ é”™è¯¯å¤„ç†å’Œé‡è¯• | `backend/app/services/wecom_integration.py` | æé«˜å¯é æ€§ | â³ | 1h | - |

#### B1.3 å®ç°deeplinkæœåŠ¡ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºDeepLinkService | `backend/app/services/deeplink.py` | JWT tokenç”Ÿæˆå’ŒéªŒè¯ | â³ | 2h | - |
| å®ç°make_token() | `backend/app/services/deeplink.py` | ç”ŸæˆçŸ­æ•ˆJWT | â³ | 1h | - |
| å®ç°verify_token() | `backend/app/services/deeplink.py` | éªŒè¯tokenæœ‰æ•ˆæ€§ | â³ | 0.5h | - |
| å®ç°build_deeplink() | `backend/app/services/deeplink.py` | æ„å»ºå‰ç«¯é“¾æ¥ | â³ | 0.5h | - |

#### B1.4 å®ç°outboxæœåŠ¡ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºOutboxæ¨¡å‹ | `backend/app/models.py` | äº‹åŠ¡å‹outboxè¡¨ | â³ | 1h | - |
| å®ç°OutboxService | `backend/app/services/outbox.py` | å¤–éƒ¨å‰¯ä½œç”¨ç®¡ç† | â³ | 2h | - |
| å®ç°worker_tick() | `backend/app/services/outbox.py` | æ‰¹å¤„ç†å¤–éƒ¨è°ƒç”¨ | â³ | 1h | - |

### B2: APIç«¯ç‚¹å®ç° (3å¤©)

#### B2.1 å®ç°submit-approvalç«¯ç‚¹ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºpydantic schemas | `backend/app/schemas.py` | SubmitApprovalReq/Respæ¨¡å‹ | â³ | 1h | - |
| å®ç°submit_approvalç«¯ç‚¹ | `backend/app/api/v1/endpoints/quotes.py` | å®Œæ•´å®¡æ‰¹æäº¤æµç¨‹ | â³ | 3h | - |
| æ·»åŠ æƒé™æ ¡éªŒ | `backend/app/api/v1/endpoints/quotes.py` | guard_can_submité€»è¾‘ | â³ | 1h | - |
| æ·»åŠ çŠ¶æ€éªŒè¯ | `backend/app/api/v1/endpoints/quotes.py` | ç¡®ä¿è‰ç¨¿çŠ¶æ€ | â³ | 0.5h | - |
| é›†æˆå¿«ç…§åˆ›å»º | `backend/app/api/v1/endpoints/quotes.py` | è°ƒç”¨snapshot_service | â³ | 0.5h | - |

#### B2.2 å®ç°å›è°ƒå¤„ç†ç«¯ç‚¹ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºå›è°ƒschemas | `backend/app/schemas.py` | WeComCallbackEventæ¨¡å‹ | â³ | 1h | - |
| å®ç°approval_callbackç«¯ç‚¹ | `backend/app/api/v1/endpoints/wecom_callback.py` | å›è°ƒå¤„ç†é€»è¾‘ | â³ | 2.5h | - |
| å®ç°å¹‚ç­‰æ€§å¤„ç† | `backend/app/api/v1/endpoints/wecom_callback.py` | é˜²é‡å¤å¤„ç† | â³ | 1.5h | - |
| é›†æˆç”Ÿæ•ˆæŠ¥ä»·å•åˆ›å»º | `backend/app/api/v1/endpoints/wecom_callback.py` | approvedçŠ¶æ€å¤„ç† | â³ | 1h | - |

#### B2.3 å®ç°è¾…åŠ©ç«¯ç‚¹ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| å®ç°exportç«¯ç‚¹ | `backend/app/api/v1/endpoints/quotes.py` | å¯¼å‡ºåŠŸèƒ½å ä½ | â³ | 2h | - |
| å®ç°deeplinkç«¯ç‚¹ | `backend/app/api/v1/endpoints/quotes.py` | ç”Ÿæˆè®¿é—®é“¾æ¥ | â³ | 1h | - |
| å®ç°çŠ¶æ€æŸ¥è¯¢ç«¯ç‚¹ | `backend/app/api/v1/endpoints/quotes.py` | å®¡æ‰¹çŠ¶æ€æŸ¥è¯¢ | â³ | 1h | - |
| æ·»åŠ OpenAPIæ–‡æ¡£ | æ‰€æœ‰ç«¯ç‚¹ | å®Œå–„æ¥å£æ–‡æ¡£æ³¨é‡Š | â³ | 2h | - |

### B3: ç”Ÿæ•ˆæŠ¥ä»·å•æœåŠ¡ (2å¤©)

#### B3.1 å®ç°EffectiveQuoteService (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºEffectiveQuoteService | `backend/app/services/effective_quote_service.py` | åŸºç¡€æœåŠ¡ç±» | â³ | 0.5h | - |
| å®ç°create_effective_quote() | `backend/app/services/effective_quote_service.py` | åˆ›å»ºç”Ÿæ•ˆæŠ¥ä»·å• | â³ | 2.5h | - |
| å®ç°ç‰ˆæœ¬ç®¡ç† | `backend/app/services/effective_quote_service.py` | è‡ªåŠ¨ç‰ˆæœ¬é€’å¢ | â³ | 1h | - |
| é›†æˆå¯¼å‡ºæœåŠ¡ | `backend/app/services/effective_quote_service.py` | è°ƒç”¨export_service | â³ | 1h | - |
| å®ç°checksumè®¡ç®— | `backend/app/services/effective_quote_service.py` | æ•°æ®å®Œæ•´æ€§æ ¡éªŒ | â³ | 1h | - |

#### B3.2 å®ç°å¯¼å‡ºæœåŠ¡å ä½ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºExportService | `backend/app/services/export_service.py` | å¯¼å‡ºæœåŠ¡åŸºç¡€æ¡†æ¶ | â³ | 1h | - |
| å®ç°PDFå¯¼å‡ºå ä½ | `backend/app/services/export_service.py` | ä½¿ç”¨reportlabç”Ÿæˆç®€å•PDF | â³ | 3h | - |
| å®ç°Excelå¯¼å‡ºå ä½ | `backend/app/services/export_service.py` | ä½¿ç”¨xlsxwriterç”ŸæˆExcel | â³ | 1.5h | - |
| é…ç½®é™æ€æ–‡ä»¶æœåŠ¡ | é…ç½®æ–‡ä»¶ | ç¡®ä¿å¯¼å‡ºæ–‡ä»¶å¯ä¸‹è½½ | â³ | 0.5h | - |

### é˜¶æ®µBéªŒæ”¶æ ‡å‡†

**å¿…é¡»å…¨éƒ¨é€šè¿‡æ‰èƒ½è¿›å…¥é˜¶æ®µC**:

- [ ] âœ… Postman: submit-approvalç«¯ç‚¹è¿”å›deeplink_url
- [ ] âœ… mock_wecom_callback.shè„šæœ¬è°ƒç”¨approvedåï¼Œç”ŸæˆEffectiveQuoteå’Œå¯¼å‡ºURL  
- [ ] âœ… å›è°ƒå¤„ç†å…·æœ‰å¹‚ç­‰æ€§ï¼Œé‡å¤è°ƒç”¨ä¸äº§ç”Ÿé‡å¤å‰¯ä½œç”¨
- [ ] âœ… deeplinkçš„JWT tokenå¯æ­£ç¡®éªŒè¯ï¼Œè¿‡æœŸtokenè¢«æ‹’ç»
- [ ] âœ… ç”Ÿæ•ˆæŠ¥ä»·å•åŒ…å«ç‰ˆæœ¬å·å’Œå¯¼å‡ºæ–‡ä»¶URL

---

## ğŸ¨ é˜¶æ®µC: å¯¼å‡ºå ä½ + å‰ç«¯æ”¹é€  + æ–‡æ¡£å®Œå–„ (1.5å‘¨)

### C1: å‰ç«¯ç»„ä»¶æ”¹é€  (3å¤©)

#### C1.1 ä¼˜åŒ–SubmitApprovalModal (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ˜¾ç¤ºæ¨¡æ¿ä¿¡æ¯ | `frontend/src/components/SubmitApprovalModal.js` | æ˜¾ç¤ºå°†ä½¿ç”¨çš„å®¡æ‰¹æ¨¡æ¿ | â³ | 1.5h | - |
| æ˜¾ç¤ºå®¡æ‰¹äººé¢„è§ˆ | `frontend/src/components/SubmitApprovalModal.js` | æ ¹æ®è§„åˆ™æ˜¾ç¤ºæ‹Ÿå®šå®¡æ‰¹äºº | â³ | 2h | - |
| æ·»åŠ é‡‘é¢é˜ˆå€¼æç¤º | `frontend/src/components/SubmitApprovalModal.js` | æ˜¾ç¤ºé‡‘é¢å¯¹åº”çš„å®¡æ‰¹çº§åˆ« | â³ | 1h | - |
| ä¼˜åŒ–æäº¤ååé¦ˆ | `frontend/src/components/SubmitApprovalModal.js` | æ˜¾ç¤ºä¼ä¸šå¾®ä¿¡deeplink | â³ | 1.5h | - |

#### C1.2 å®Œå–„ApprovalHistoryç»„ä»¶ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| å®ç°æ—¶é—´è½´æ˜¾ç¤º | `frontend/src/components/ApprovalHistory.js` | ä½¿ç”¨AntD Timelineç»„ä»¶ | â³ | 2h | - |
| æ·»åŠ çŠ¶æ€å›¾æ ‡ | `frontend/src/components/ApprovalHistory.js` | ä¸åŒçŠ¶æ€æ˜¾ç¤ºä¸åŒå›¾æ ‡ | â³ | 1h | - |
| å®ç°è½®è¯¢åˆ·æ–° | `frontend/src/components/ApprovalHistory.js` | å®šæœŸæ£€æŸ¥çŠ¶æ€æ›´æ–° | â³ | 2h | - |
| æ·»åŠ è¯¦æƒ…å±•ç¤º | `frontend/src/components/ApprovalHistory.js` | å±•å¼€æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ | â³ | 1h | - |

#### C1.3 æ”¹é€ QuoteDetailé¡µé¢ (8å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ·»åŠ çŠ¶æ€æ¡æ˜¾ç¤º | `frontend/src/pages/QuoteDetail.js` | é¡¶éƒ¨çŠ¶æ€æ¡ | â³ | 1.5h | - |
| å®ç°ä¸‰ä¸ªæ“ä½œæŒ‰é’® | `frontend/src/pages/QuoteDetail.js` | æäº¤å®¡æ‰¹/æ‰“å¼€ä¼ä¸šå¾®ä¿¡/ä¸‹è½½å¯¼å‡º | â³ | 2h | - |
| æ”¯æŒå¿«ç…§å‚æ•° | `frontend/src/pages/QuoteDetail.js` | å¤„ç†?snap=&t=å‚æ•° | â³ | 2h | - |
| æ·»åŠ tokenéªŒè¯ | `frontend/src/pages/QuoteDetail.js` | JWT tokenæ ¡éªŒå¤„ç† | â³ | 1.5h | - |
| é›†æˆApprovalHistory | `frontend/src/pages/QuoteDetail.js` | æ˜¾ç¤ºå®¡æ‰¹å†å² | â³ | 1h | - |

#### C1.4 å‰ç«¯APIæœåŠ¡å±‚ (4å°æ—¶)  
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| æ‰©å±•approvalApi.js | `frontend/src/services/approvalApi.js` | æ–°å¢APIæ–¹æ³•å°è£… | â³ | 2h | - |
| æ·»åŠ é”™è¯¯å¤„ç† | `frontend/src/services/approvalApi.js` | ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæç¤º | â³ | 1h | - |
| æ·»åŠ loadingçŠ¶æ€ç®¡ç† | `frontend/src/services/approvalApi.js` | APIè°ƒç”¨çŠ¶æ€ç®¡ç† | â³ | 1h | - |

### C2: æµ‹è¯•è„šæœ¬å’Œå·¥å…· (2å¤©)

#### C2.1 åˆ›å»ºæµ‹è¯•è„šæœ¬ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºdev_run.sh | `scripts/dev_run.sh` | ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ | â³ | 1h | - |
| åˆ›å»ºmockå›è°ƒè„šæœ¬ | `scripts/mock_wecom_callback.sh` | æ¨¡æ‹Ÿä¼ä¸šå¾®ä¿¡å›è°ƒ | â³ | 2h | - |
| åˆ›å»ºæ•°æ®åº“é‡ç½®è„šæœ¬ | `scripts/reset_db.sh` | é‡ç½®æµ‹è¯•æ•°æ® | â³ | 1h | - |
| åˆ›å»ºç¯å¢ƒæ£€æŸ¥è„šæœ¬ | `scripts/check_env.sh` | éªŒè¯ç¯å¢ƒé…ç½® | â³ | 0.5h | - |
| æƒé™è®¾ç½®å’Œæµ‹è¯• | è„šæœ¬æƒé™ | ç¡®ä¿è„šæœ¬å¯æ‰§è¡Œ | â³ | 0.5h | - |
| è„šæœ¬é›†æˆæµ‹è¯• | ç«¯åˆ°ç«¯æµ‹è¯• | éªŒè¯è„šæœ¬åŠŸèƒ½æ­£å¸¸ | â³ | 1h | - |

#### C2.2 åˆ›å»ºå•å…ƒæµ‹è¯• (8å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| è§„åˆ™å’Œå¿«ç…§æµ‹è¯• | `tests/test_rules_and_snapshot.py` | è§„åˆ™é€‰æ‹©ã€å¿«ç…§hashæµ‹è¯• | â³ | 2h | - |
| æäº¤å’Œå›è°ƒæµ‹è¯• | `tests/test_submit_and_callback.py` | ç«¯åˆ°ç«¯å®¡æ‰¹æµç¨‹æµ‹è¯• | â³ | 3h | - |  
| Deeplinkæµ‹è¯• | `tests/test_deeplink.py` | JWTç”Ÿæˆå’ŒéªŒè¯æµ‹è¯• | â³ | 1.5h | - |
| å¯¼å‡ºåŠŸèƒ½æµ‹è¯• | `tests/test_export.py` | å¯¼å‡ºæ–‡ä»¶ç”Ÿæˆæµ‹è¯• | â³ | 1.5h | - |

#### C2.3 åˆ›å»ºAPIæµ‹è¯•é›†åˆ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |  
|------|------|------|------|------|------|
| åˆ›å»ºPostmané›†åˆ | `docs/postman_collection.json` | å®Œæ•´APIæµ‹è¯•ç”¨ä¾‹ | â³ | 2h | - |
| æ·»åŠ ç¯å¢ƒå˜é‡é…ç½® | `docs/postman_environment.json` | æµ‹è¯•ç¯å¢ƒé…ç½® | â³ | 0.5h | - |
| åˆ›å»ºæµ‹è¯•æ•°æ®æ ·æœ¬ | `docs/test_data/` | Mockæ•°æ®å’Œå›è°ƒç¤ºä¾‹ | â³ | 1h | - |
| æµ‹è¯•ç”¨ä¾‹æ–‡æ¡£ | `docs/api_testing_guide.md` | APIæµ‹è¯•ä½¿ç”¨è¯´æ˜ | â³ | 0.5h | - |

### C3: æ–‡æ¡£å’Œéƒ¨ç½² (2å¤©)

#### C3.1 åˆ›å»ºé›†æˆæ–‡æ¡£ (6å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| åˆ›å»ºä¸»æ–‡æ¡£æ¡†æ¶ | `docs/approval_integration.md` | æ–‡æ¡£ç»“æ„å’Œç›®å½• | â³ | 0.5h | - |
| ç¼–å†™é…ç½®è¯´æ˜ | `docs/approval_integration.md` | ç¯å¢ƒé…ç½®å’Œè§„åˆ™é…ç½® | â³ | 1.5h | - |
| ç»˜åˆ¶æ¶æ„å›¾ | `docs/approval_integration.md` | ASCII/Mermaidæ¶æ„å›¾ | â³ | 1h | - |
| ç¼–å†™æ—¶åºå›¾ | `docs/approval_integration.md` | å®¡æ‰¹æµç¨‹æ—¶åºè¯´æ˜ | â³ | 1.5h | - |
| ç¼–å†™æ•…éšœæ’æŸ¥æŒ‡å— | `docs/approval_integration.md` | å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ | â³ | 1h | - |
| åˆ›å»ºå›å½’ç”¨ä¾‹æ¸…å• | `docs/approval_integration.md` | éªŒæ”¶æµ‹è¯•æ¸…å• | â³ | 0.5h | - |

#### C3.2 è¿ç»´æ”¯æŒæ–‡æ¡£ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| éƒ¨ç½²æŒ‡å— | `docs/deployment_guide.md` | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è¯´æ˜ | â³ | 1.5h | - |
| ç›‘æ§å’Œå‘Šè­¦ | `docs/monitoring_guide.md` | ç³»ç»Ÿç›‘æ§è¦ç‚¹ | â³ | 1h | - |
| å¤‡ä»½å’Œæ¢å¤ | `docs/backup_recovery.md` | æ•°æ®å¤‡ä»½ç­–ç•¥ | â³ | 1h | - |
| æ€§èƒ½è°ƒä¼˜ | `docs/performance_tuning.md` | æ€§èƒ½ä¼˜åŒ–å»ºè®® | â³ | 0.5h | - |

#### C3.3 ç”¨æˆ·ä½¿ç”¨æ–‡æ¡£ (4å°æ—¶)
| ä»»åŠ¡ | æ–‡ä»¶ | å†…å®¹ | çŠ¶æ€ | é¢„è®¡ | å®é™… |
|------|------|------|------|------|------|
| ç”¨æˆ·æ“ä½œæ‰‹å†Œ | `docs/user_manual.md` | å‰ç«¯æ“ä½œæµç¨‹è¯´æ˜ | â³ | 2h | - |
| ç®¡ç†å‘˜æ‰‹å†Œ | `docs/admin_manual.md` | å®¡æ‰¹è§„åˆ™é…ç½®è¯´æ˜ | â³ | 1.5h | - |
| FAQæ–‡æ¡£ | `docs/faq.md` | å¸¸è§é—®é¢˜ç­”ç–‘ | â³ | 0.5h | - |

### é˜¶æ®µCéªŒæ”¶æ ‡å‡†

**é¡¹ç›®æœ€ç»ˆéªŒæ”¶æ ‡å‡†**:

- [ ] âœ… å‰ç«¯å®Œæ•´å±•ç¤ºçŠ¶æ€ã€å†å²ã€å¯¼å‡ºä¸‹è½½ï¼Œäº¤äº’æ— æ˜æ˜¾æŠ¥é”™
- [ ] âœ… ä»ä¼ä¸šå¾®ä¿¡æ¶ˆæ¯deeplinkå¯æ­£ç¡®è¿›å…¥æŠ¥ä»·è¯¦æƒ…é¡µ
- [ ] âœ… SubmitApprovalModalæ˜¾ç¤ºæ¨¡æ¿å’Œå®¡æ‰¹äººä¿¡æ¯
- [ ] âœ… ApprovalHistoryç»„ä»¶æ˜¾ç¤ºæ—¶é—´è½´å¹¶æ”¯æŒè½®è¯¢åˆ·æ–°
- [ ] âœ… pytestæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼ŒMockå›è°ƒè„šæœ¬å¯æ­£å¸¸è¿è¡Œ
- [ ] âœ… Postmané›†åˆå¯å¯¼å…¥å¹¶æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
- [ ] âœ… docs/approval_integration.mdæ–‡æ¡£å®Œæ•´ï¼ŒåŒ…å«é…ç½®ã€æ—¶åºã€æ•…éšœæ’æŸ¥
- [ ] âœ… å›¢é˜Ÿå¯æŒ‰æ–‡æ¡£è‡ªåŠ©é…ç½®å’Œå›å½’æµ‹è¯•

---

## ğŸ“Š é¡¹ç›®è·Ÿè¸ªè¡¨

### æ•´ä½“è¿›åº¦æ¦‚è§ˆ

| é˜¶æ®µ | ä»»åŠ¡æ•° | é¢„è®¡å·¥æ—¶ | å·²å®Œæˆ | è¿›è¡Œä¸­ | å¾…å¼€å§‹ | å®Œæˆç‡ | çŠ¶æ€ |
|------|-------|----------|-------|--------|--------|--------|------|
| é˜¶æ®µA | 15 | 40h | 0 | 0 | 15 | 0% | â³ å¾…å¼€å§‹ |
| é˜¶æ®µB | 18 | 60h | 0 | 0 | 18 | 0% | â³ å¾…å¼€å§‹ |  
| é˜¶æ®µC | 22 | 50h | 0 | 0 | 22 | 0% | â³ å¾…å¼€å§‹ |
| **æ€»è®¡** | **55** | **150h** | **0** | **0** | **55** | **0%** | ğŸš€ **å‡†å¤‡å¼€å§‹** |

### é‡Œç¨‹ç¢‘æ—¶é—´è¡¨

| é‡Œç¨‹ç¢‘ | è®¡åˆ’å®Œæˆæ—¶é—´ | å®é™…å®Œæˆæ—¶é—´ | çŠ¶æ€ | å…³é”®äº¤ä»˜ç‰© |
|--------|--------------|--------------|------|-----------|
| é˜¶æ®µAéªŒæ”¶ | 2025-09-08 | - | â³ | è§„åˆ™é…ç½®+æ•°æ®æ¨¡å‹+å¿«ç…§æœºåˆ¶ |
| é˜¶æ®µBéªŒæ”¶ | 2025-09-18 | - | â³ | å®¡æ‰¹æµç¨‹+å›è°ƒå¤„ç†+ç”Ÿæ•ˆæŠ¥ä»·å• |
| é˜¶æ®µCéªŒæ”¶ | 2025-09-30 | - | â³ | å‰ç«¯æ”¹é€ +æµ‹è¯•+æ–‡æ¡£ |
| é¡¹ç›®å®Œæˆ | 2025-09-30 | - | â³ | å®Œæ•´å¯ç”¨çš„ä¼ä¸šå¾®ä¿¡å®¡æ‰¹ç³»ç»Ÿ |

---

## ğŸ“ ä½¿ç”¨è¯´æ˜

1. **å¼€å§‹å·¥ä½œå‰**ï¼šä»é˜¶æ®µAçš„A1.1å¼€å§‹ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªä»»åŠ¡
2. **å®Œæˆä»»åŠ¡å**ï¼šåœ¨å¯¹åº”è¡¨æ ¼ä¸­æ›´æ–°çŠ¶æ€ä¸ºâœ…ï¼Œè®°å½•å®é™…ç”¨æ—¶
3. **é‡åˆ°é—®é¢˜æ—¶**ï¼šåœ¨çŠ¶æ€åˆ—æ ‡è®°âš ï¸ï¼Œå¹¶åœ¨å¤‡æ³¨ä¸­è¯´æ˜é—®é¢˜
4. **é˜¶æ®µå®Œæˆå**ï¼šå¿…é¡»é€šè¿‡æ‰€æœ‰éªŒæ”¶æ ‡å‡†æ‰èƒ½è¿›å…¥ä¸‹ä¸€é˜¶æ®µ
5. **é¡¹ç›®è·Ÿè¸ª**ï¼šå®šæœŸæ›´æ–°è¿›åº¦æ¦‚è§ˆè¡¨å’Œé‡Œç¨‹ç¢‘çŠ¶æ€

## ğŸ“š ä»£ç æ¨¡æ¿å‚è€ƒ

è¯¦ç»†çš„å®æ–½ä»£ç æ¨¡æ¿è¯·æŸ¥çœ‹: `CODE_TEMPLATES_REFERENCE.md`

è¯¥æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰å…³é”®ä»»åŠ¡çš„å®Œæ•´ä»£ç ç¤ºä¾‹ï¼š
- é…ç½®æ–‡ä»¶å’Œè§„åˆ™åŠ è½½å™¨
- æ•°æ®æ¨¡å‹å®šä¹‰  
- æœåŠ¡å±‚å®ç°
- APIç«¯ç‚¹å®ç°
- å‰ç«¯ç»„ä»¶ä»£ç 
- æµ‹è¯•è„šæœ¬æ¨¡æ¿

åœ¨æ‰§è¡Œå…·ä½“ä»»åŠ¡æ—¶ï¼Œå¯ç›´æ¥å‚è€ƒå¯¹åº”çš„ä»£ç æ¨¡æ¿è¿›è¡Œå®æ–½ã€‚

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨**ï¼šç­‰å¾…ç¡®è®¤åï¼Œä»é˜¶æ®µA.1.1"è¡¥é½.envé…ç½®é¡¹"å¼€å§‹æ‰§è¡Œã€‚